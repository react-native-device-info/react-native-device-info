{"ast":null,"code":"import normalizeNativeEvent from\"../normalizeNativeEvent\";import ReactDOMUnstableNativeDependencies from'react-dom/unstable-native-dependencies';var ResponderEventPlugin=ReactDOMUnstableNativeDependencies.ResponderEventPlugin,ResponderTouchHistoryStore=ReactDOMUnstableNativeDependencies.ResponderTouchHistoryStore;if(!ResponderEventPlugin.eventTypes.responderMove.dependencies){var topMouseDown='topMouseDown';var topMouseMove='topMouseMove';var topMouseUp='topMouseUp';var topScroll='topScroll';var topSelectionChange='topSelectionChange';var topTouchCancel='topTouchCancel';var topTouchEnd='topTouchEnd';var topTouchMove='topTouchMove';var topTouchStart='topTouchStart';var endDependencies=[topTouchCancel,topTouchEnd,topMouseUp];var moveDependencies=[topTouchMove,topMouseMove];var startDependencies=[topTouchStart,topMouseDown];ResponderEventPlugin.eventTypes.responderMove.dependencies=moveDependencies;ResponderEventPlugin.eventTypes.responderEnd.dependencies=endDependencies;ResponderEventPlugin.eventTypes.responderStart.dependencies=startDependencies;ResponderEventPlugin.eventTypes.responderRelease.dependencies=endDependencies;ResponderEventPlugin.eventTypes.responderTerminationRequest.dependencies=[];ResponderEventPlugin.eventTypes.responderGrant.dependencies=[];ResponderEventPlugin.eventTypes.responderReject.dependencies=[];ResponderEventPlugin.eventTypes.responderTerminate.dependencies=[];ResponderEventPlugin.eventTypes.moveShouldSetResponder.dependencies=moveDependencies;ResponderEventPlugin.eventTypes.selectionChangeShouldSetResponder.dependencies=[topSelectionChange];ResponderEventPlugin.eventTypes.scrollShouldSetResponder.dependencies=[topScroll];ResponderEventPlugin.eventTypes.startShouldSetResponder.dependencies=startDependencies;}var lastActiveTouchTimestamp=null;var EMULATED_MOUSE_THERSHOLD_MS=1000;var originalExtractEvents=ResponderEventPlugin.extractEvents;ResponderEventPlugin.extractEvents=function(topLevelType,targetInst,nativeEvent,nativeEventTarget){var hasActiveTouches=ResponderTouchHistoryStore.touchHistory.numberActiveTouches>0;var eventType=nativeEvent.type;var shouldSkipMouseAfterTouch=false;if(eventType.indexOf('touch')>-1){lastActiveTouchTimestamp=Date.now();}else if(lastActiveTouchTimestamp&&eventType.indexOf('mouse')>-1){var now=Date.now();shouldSkipMouseAfterTouch=now-lastActiveTouchTimestamp<EMULATED_MOUSE_THERSHOLD_MS;}if((eventType==='mousemove'||eventType==='mouseup')&&!hasActiveTouches||nativeEvent.button===1||nativeEvent.button===2||shouldSkipMouseAfterTouch){return;}var normalizedEvent=normalizeNativeEvent(nativeEvent);return originalExtractEvents.call(ResponderEventPlugin,topLevelType,targetInst,normalizedEvent,nativeEventTarget);};export default ResponderEventPlugin;","map":{"version":3,"sources":["/Users/robertherber/code/react-native-device-info/example-web/node_modules/react-native-web/dist/modules/ResponderEventPlugin/index.js"],"names":["normalizeNativeEvent","ReactDOMUnstableNativeDependencies","ResponderEventPlugin","ResponderTouchHistoryStore","eventTypes","responderMove","dependencies","topMouseDown","topMouseMove","topMouseUp","topScroll","topSelectionChange","topTouchCancel","topTouchEnd","topTouchMove","topTouchStart","endDependencies","moveDependencies","startDependencies","responderEnd","responderStart","responderRelease","responderTerminationRequest","responderGrant","responderReject","responderTerminate","moveShouldSetResponder","selectionChangeShouldSetResponder","scrollShouldSetResponder","startShouldSetResponder","lastActiveTouchTimestamp","EMULATED_MOUSE_THERSHOLD_MS","originalExtractEvents","extractEvents","topLevelType","targetInst","nativeEvent","nativeEventTarget","hasActiveTouches","touchHistory","numberActiveTouches","eventType","type","shouldSkipMouseAfterTouch","indexOf","Date","now","button","normalizedEvent","call"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) Nicolas Gallagher.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\n// based on https://github.com/facebook/react/pull/4303/files\nimport normalizeNativeEvent from '../normalizeNativeEvent';\nimport ReactDOMUnstableNativeDependencies from 'react-dom/unstable-native-dependencies';\nvar ResponderEventPlugin = ReactDOMUnstableNativeDependencies.ResponderEventPlugin,\n    ResponderTouchHistoryStore = ReactDOMUnstableNativeDependencies.ResponderTouchHistoryStore; // On older versions of React (< 16.4) we have to inject the dependencies in\n// order for the plugin to work properly in the browser. This version still\n// uses `top*` strings to identify the internal event names.\n// https://github.com/facebook/react/pull/12629\n\nif (!ResponderEventPlugin.eventTypes.responderMove.dependencies) {\n  var topMouseDown = 'topMouseDown';\n  var topMouseMove = 'topMouseMove';\n  var topMouseUp = 'topMouseUp';\n  var topScroll = 'topScroll';\n  var topSelectionChange = 'topSelectionChange';\n  var topTouchCancel = 'topTouchCancel';\n  var topTouchEnd = 'topTouchEnd';\n  var topTouchMove = 'topTouchMove';\n  var topTouchStart = 'topTouchStart';\n  var endDependencies = [topTouchCancel, topTouchEnd, topMouseUp];\n  var moveDependencies = [topTouchMove, topMouseMove];\n  var startDependencies = [topTouchStart, topMouseDown];\n  /**\n   * Setup ResponderEventPlugin dependencies\n   */\n\n  ResponderEventPlugin.eventTypes.responderMove.dependencies = moveDependencies;\n  ResponderEventPlugin.eventTypes.responderEnd.dependencies = endDependencies;\n  ResponderEventPlugin.eventTypes.responderStart.dependencies = startDependencies;\n  ResponderEventPlugin.eventTypes.responderRelease.dependencies = endDependencies;\n  ResponderEventPlugin.eventTypes.responderTerminationRequest.dependencies = [];\n  ResponderEventPlugin.eventTypes.responderGrant.dependencies = [];\n  ResponderEventPlugin.eventTypes.responderReject.dependencies = [];\n  ResponderEventPlugin.eventTypes.responderTerminate.dependencies = [];\n  ResponderEventPlugin.eventTypes.moveShouldSetResponder.dependencies = moveDependencies;\n  ResponderEventPlugin.eventTypes.selectionChangeShouldSetResponder.dependencies = [topSelectionChange];\n  ResponderEventPlugin.eventTypes.scrollShouldSetResponder.dependencies = [topScroll];\n  ResponderEventPlugin.eventTypes.startShouldSetResponder.dependencies = startDependencies;\n}\n\nvar lastActiveTouchTimestamp = null; // The length of time after a touch that we ignore the browser's emulated mouse events\n// https://developer.mozilla.org/en-US/docs/Web/API/Touch_events/Using_Touch_Events\n\nvar EMULATED_MOUSE_THERSHOLD_MS = 1000;\nvar originalExtractEvents = ResponderEventPlugin.extractEvents;\n\nResponderEventPlugin.extractEvents = function (topLevelType, targetInst, nativeEvent, nativeEventTarget) {\n  var hasActiveTouches = ResponderTouchHistoryStore.touchHistory.numberActiveTouches > 0;\n  var eventType = nativeEvent.type;\n  var shouldSkipMouseAfterTouch = false;\n\n  if (eventType.indexOf('touch') > -1) {\n    lastActiveTouchTimestamp = Date.now();\n  } else if (lastActiveTouchTimestamp && eventType.indexOf('mouse') > -1) {\n    var now = Date.now();\n    shouldSkipMouseAfterTouch = now - lastActiveTouchTimestamp < EMULATED_MOUSE_THERSHOLD_MS;\n  }\n\n  if ( // Filter out mousemove and mouseup events when a touch hasn't started yet\n  (eventType === 'mousemove' || eventType === 'mouseup') && !hasActiveTouches || // Filter out events from wheel/middle and right click.\n  nativeEvent.button === 1 || nativeEvent.button === 2 || // Filter out mouse events that browsers dispatch immediately after touch events end\n  // Prevents the REP from calling handlers twice for touch interactions.\n  // See #802 and #932.\n  shouldSkipMouseAfterTouch) {\n    return;\n  }\n\n  var normalizedEvent = normalizeNativeEvent(nativeEvent);\n  return originalExtractEvents.call(ResponderEventPlugin, topLevelType, targetInst, normalizedEvent, nativeEventTarget);\n};\n\nexport default ResponderEventPlugin;"]},"metadata":{},"sourceType":"module"}